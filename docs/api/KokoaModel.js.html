<!DOCTYPE html><html lang="en"> <head> <meta charset="utf-8"> <title>JSDoc: Source: KokoaModel.js</title> <script src="../prettify.c7297134.js"> </script> <script src="../lang-css.4d273a47.js"> </script> <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> <link type="text/css" rel="stylesheet" href="../prettify-tomorrow.9c04f96b.css"> <link type="text/css" rel="stylesheet" href="../jsdoc-default.a0fe8ca2.css"> </head> <body> <div id="main"> <h1 class="page-title">Source: KokoaModel.js</h1> <section> <article> <pre class="prettyprint source linenums"><code>/* KokoaNLP
Copyright (C) 2018  Seungjae Park

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;http://www.gnu.org/licenses/>. */

const fs = require('fs');

const Kokoa = require('./Kokoa');

/**
 * Class representing KokoaNLP Model.
 */
class KokoaModel {
  /**
   * Loads KokoaNLP instance from the given model.
   * @param {string} file KokoaNLP model file path.
   * @returns {Kokoa} KokoaNLP instance.
   */
  static loadFile(file) {
    if (fs.existsSync(file)) {
      const originalFrequencies = [];
      const originalScores = [];
      const reversedFrequencies = [];
      const reversedScores = [];
      fs.readFileSync(file).toString().split('\n').forEach((value) => {
        const [type, text, frequency, score] = value.split(',');
        if (type === 'O') {
          originalFrequencies.push([text, Number(frequency)]);
          originalScores.push([text, Number(score)]);
        } else {
          reversedFrequencies.push([text, Number(frequency)]);
          reversedScores.push([text, Number(score)]);
        }
      });
      return new Kokoa(originalFrequencies, reversedFrequencies, originalScores, reversedScores);
    }
    return null;
  }

  /**
   * Saves KokoaNLP instance as a file.
   * @param {Kokoa} kokoa KokoaNLP instance
   * @param {string} file KokoaNLP model file path.
   */
  static saveFile(kokoa, file) {
    const {
      originalFrequencies, originalScores, reversedFrequencies, reversedScores,
    } = kokoa;
    const content = [];
    originalFrequencies.forEach((frequency, text) => {
      content.push(['O', text, frequency, originalScores.get(text)].join(','));
    });
    reversedFrequencies.forEach((frequency, text) => {
      content.push(['R', text, frequency, reversedScores.get(text)].join(','));
    });
    fs.writeFileSync(file, content.join('\n'));
  }
}

module.exports = KokoaModel;
</code></pre> </article> </section> </div> <nav> <h2><a href="../api/index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="../api/Kokoa.html">Kokoa</a></li><li><a href="../api/KokoaModel.html">KokoaModel</a></li><li><a href="../api/KokoaUtil.html">KokoaUtil</a></li></ul><h3><a href="../api/global.html">Global</a></h3> </nav> <br class="clear"> <footer> Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Jun 13 2018 02:48:02 GMT+0900 (Korean Standard Time) </footer> <script>prettyPrint();</script> <script src="../linenumber.1c80b311.js"> </script> </body> </html>